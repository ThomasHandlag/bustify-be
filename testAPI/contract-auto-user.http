### Contract Management API with Auto User Creation

### 1. Create Contract
POST {{host}}/api/contracts
Content-Type: multipart/form-data

VATCode=1234567890
email=hoaihv.21it@vku.udn.vn
phone=+84901234567
address=123 Main Street, Ho Chi Minh City
startDate=2025-09-01T00:00:00Z
endDate=2026-08-31T23:59:59Z
operationArea=Ho Chi Minh City - Da Lat
attachmentUrl=@license.pdf

### 2. Admin Review - Accept Contract (Auto create user and operator)
POST {{host}}/api/contracts/admin/1/review
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "action": "APPROVE",
  "adminNote": "Contract approved. User and bus operator created automatically."
}

### 3. Admin Review - Reject Contract
POST {{host}}/api/contracts/admin/2/review
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "action": "REJECT",
  "adminNote": "Missing required documents."
}

### 4. Admin Review - Request Revision
POST {{host}}/api/contracts/admin/3/review
Content-Type: application/json
Authorization: Bearer {{admin_token}}

{
  "action": "REQUEST_REVISION",
  "adminNote": "Please update your business license."
}

### 5. Get Contract by ID
GET {{host}}/api/contracts/1
Authorization: Bearer {{token}}

### 6. Get All Contracts (Admin)
GET {{host}}/api/contracts/admin/all?page=0&size=10
Authorization: Bearer {{admin_token}}

### 7. Get Contracts by Status (Admin)
GET {{host}}/api/contracts/admin/status/PENDING?page=0&size=10
Authorization: Bearer {{admin_token}}

### 8. Search Contracts (Admin)
GET {{host}}/api/contracts/admin/search?email=newoperator@busify.com&status=ACCEPTED&page=0&size=10
Authorization: Bearer {{admin_token}}

### 9. Get Contract Statistics (Admin)
GET {{host}}/api/contracts/admin/statistics
Authorization: Bearer {{admin_token}}

### 10. Get My Contracts (Bus Operator)
GET {{host}}/api/contracts/my-contracts
Authorization: Bearer {{operator_token}}

### Variables
@host = http://localhost:8080
@admin_token = your_admin_jwt_token_here
@operator_token = your_operator_jwt_token_here
@token = your_jwt_token_here

### Test Scenarios:

### Scenario 1: New User Creation
# 1. Create contract with email: newuser@example.com
# 2. Admin approve contract -> System will:
#    - Create new user account with role BUS_OPERATOR
#    - Create bus operator profile
#    - Send welcome email with temporary password
#    - User must change password on first login

### Scenario 2: Existing User Role Update
# 1. Create contract with email of existing CUSTOMER user
# 2. Admin approve contract -> System will:
#    - Update user role to BUS_OPERATOR
#    - Create bus operator profile
#    - Send contract accepted email

### Expected Flow:
# 1. Bus operator submits contract via API
# 2. Admin reviews and approves contract
# 3. System automatically:
#    - Creates user account (if not exists) or updates role
#    - Creates bus operator profile
#    - Maps contract data to user/operator profiles
#    - Sends email notification
# 4. New user receives email with login credentials
# 5. User logs in and must change password
